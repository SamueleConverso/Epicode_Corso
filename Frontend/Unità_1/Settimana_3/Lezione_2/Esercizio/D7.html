<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }

      body {
        margin: 0;
      }

      body div,
      footer {
        padding: 1rem;
      }

      footer {
        padding: 1rem;
        background-color: black;
        color: white;
      }

      .myHeading {
        color: #ff00d6;
      }
    </style>
  </head>

  <body>
    <div>
      <h1 id="title">Questo è il titolo della pagina</h1>
      <h2>Questo è il sottotitolo della pagina</h2>
    </div>

    <div>
      <hr />

      <ul id="firstList">
        <li>1st</li>
        <li>2nd</li>
        <li>3rd</li>
      </ul>

      <ul id="secondList">
        <li>1st</li>
        <li>2nd</li>
        <li>3rd</li>
      </ul>

      <a href="https://epicode.com/it/">Questo link porta al sito di Epicode</a>

      <div>
        <p>Questo testo è un placeholder per gli esercizi</p>
      </div>
    </div>

    <div>
      <p>Anche questo testo è per gli esercizi</p>
      <h2 id="changeMyColor" style="color: #ff00d6">
        Apri questa pagina con VSCode per scoprire gli esercizi
      </h2>
    </div>

    <div id="tableArea"></div>

    <footer>
      <h3>
        DOM Manipulation is super
        <a
          href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents"
          >AWESOME!</a
        >
      </h3>
    </footer>
    <script>
      /* ESERCIZIO 1
         Scrivi una funzione per cambiare il titolo della pagina in qualcos'altro
      */
      const title = document.getElementById("title");
      const changeTitle = function (str) {
        title.innerText = str;
      };
      changeTitle("Questo è il nuovo titolo della pagina!");

      /* ESERCIZIO 2
         Scrivi una funzione per aggiungere al titolo della pagina una classe "myHeading"
      */

      const addClassToTitle = function () {
        title.classList.add("myHeading");
      };
      addClassToTitle();
      /* ESERCIZIO 3
         Scrivi una funzione per che cambi il testo dei p figli di un div
        */

      const changePcontent = function () {
        const divP = document.querySelectorAll("div p");
        divP.forEach((element) => (element.innerText = "Testo cambiato"));
      };
      changePcontent();
      /* ESERCIZIO 4
         Scrivi una funzione che cambi la proprietà href di ogni link (tranne quello nel footer) con il valore https://www.google.com
        */

      const changeUrls = function () {
        const links = document.querySelectorAll("a:not(footer a)");
        links.forEach((element) =>
          element.setAttribute("href", "https://www.google.com")
        );
      };
      changeUrls();
      /* ESERCIZIO 5
         Scrivi una funzione che aggiunga un nuovo elemento lista alla seconda lista non ordinata
      */

      const addToTheSecond = function () {
        const secondList = document.getElementById("secondList");
        const newListItem = document.createElement("li");
        secondList.appendChild(newListItem);
        newListItem.innerText = "Un nuovo elemento";
      };
      addToTheSecond();
      /* ESERCIZIO 6
         Scrivi una funzione che aggiunga un secondo paragrafo al primo div
      */

      const addParagraph = function () {
        const paragraphDiv = document.querySelectorAll("div")[0];
        const newParagraph = document.createElement("p");
        paragraphDiv.appendChild(newParagraph);
        newParagraph.innerText = "Nuovo paragrafo qui.";
      };
      addParagraph();
      /* ESERCIZIO 7
         Scrivi una funzione che faccia scomparire la prima lista non ordinata
      */

      /* const hideFirstUl = function () {
          document.getElementById("firstList").innerText = "";
        };
        hideFirstUl();*/

      const hideFirstUl = function () {
        const firstList = document.getElementById("firstList");
        firstList.remove();
      };
      hideFirstUl();
      /* ESERCIZIO 8
         Scrivi una funzione che renda verde il background di ogni lista non ordinata
        */

      const paintItGreen = function () {
        const ulS = document.querySelectorAll("ul");
        ulS.forEach((element) => (element.style.backgroundColor = "green"));
      };
      paintItGreen();
      /* ESERCIZIO 9
         Scrivi una funzione che rimuova l'ultima lettera dall'h1 ogni volta che l'utente lo clicca
        */

      const makeItClickable = function () {
        let titleText = title.innerText;
        title.innerText = titleText.slice(0, titleText.length - 1);
      };
      title.addEventListener("click", makeItClickable);

      /* ESERCIZIO 10
         Crea una funzione che, al click sul footer, riveli l'URL del link interno come contenuto di un alert()
        */
      const footer = document.querySelector("footer");
      const revealFooterLink = function () {
        window.alert(
          "Link: https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Manipulating_documents"
        );
      };
      footer.addEventListener("click", revealFooterLink);
      /* ESERCIZIO 11
         Crea una funzione che crei una tabella nell'elemento con id "tableArea".
         La tabella avrà 5 elementi e questa struttura: immagine, nome prodotto, quantità, prezzo
      */
      const tableArea = document.getElementById("tableArea");
      const imgUrl =
        "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/1920px-Google_2015_logo.svg.png";

      const generateTable = function () {
        const newTable = document.createElement("table");
        tableArea.appendChild(newTable);
        const row1 = document.createElement("tr");
        const row2 = document.createElement("tr");
        const row3 = document.createElement("tr");
        const row4 = document.createElement("tr");
        const row5 = document.createElement("tr");
        const row6 = document.createElement("tr");
        newTable.setAttribute("border", "collapse");
        newTable.appendChild(row1);
        newTable.appendChild(row2);
        newTable.appendChild(row3);
        newTable.appendChild(row4);
        newTable.appendChild(row5);
        newTable.appendChild(row6);
        const rowHead1 = document.createElement("th");
        const rowHead2 = document.createElement("th");
        const rowHead3 = document.createElement("th");
        const rowHead4 = document.createElement("th");
        row1.appendChild(rowHead1);
        rowHead1.innerText = "Immagine";
        row1.appendChild(rowHead2);
        rowHead2.innerText = "Nome prodotto";
        row1.appendChild(rowHead3);
        rowHead3.innerText = "Quantità";
        row1.appendChild(rowHead4);
        rowHead4.innerText = "Prezzo";

        const imgBox1 = document.createElement("td");
        row2.appendChild(imgBox1);
        imgBox1.innerText = "";
        imgBox1.style.width = "10%";
        const img1 = document.createElement("img");
        imgBox1.appendChild(img1);
        img1.setAttribute("src", imgUrl);
        img1.style.width = "60%";
        const nameProd1 = document.createElement("td");
        row2.appendChild(nameProd1);
        nameProd1.innerText = "nome1";
        const quant1 = document.createElement("td");
        row2.appendChild(quant1);
        quant1.innerText = "quantità1";
        const price1 = document.createElement("td");
        row2.appendChild(price1);
        price1.innerText = "prezzo1";

        const imgBox2 = document.createElement("td");
        row3.appendChild(imgBox2);
        imgBox2.innerText = "";
        const img2 = document.createElement("img");
        imgBox2.appendChild(img2);
        img2.setAttribute("src", imgUrl);
        img2.style.width = "60%";
        const nameProd2 = document.createElement("td");
        row3.appendChild(nameProd2);
        nameProd2.innerText = "nome2";
        const quant2 = document.createElement("td");
        row3.appendChild(quant2);
        quant2.innerText = "quantità2";
        const price2 = document.createElement("td");
        row3.appendChild(price2);
        price2.innerText = "prezzo2";

        const imgBox3 = document.createElement("td");
        row4.appendChild(imgBox3);
        imgBox3.innerText = "";
        const img3 = document.createElement("img");
        imgBox3.appendChild(img3);
        img3.setAttribute("src", imgUrl);
        img3.style.width = "60%";
        const nameProd3 = document.createElement("td");
        row4.appendChild(nameProd3);
        nameProd3.innerText = "nome3";
        const quant3 = document.createElement("td");
        row4.appendChild(quant3);
        quant3.innerText = "quantità3";
        const price3 = document.createElement("td");
        row4.appendChild(price3);
        price3.innerText = "prezzo3";

        const imgBox4 = document.createElement("td");
        row5.appendChild(imgBox4);
        imgBox4.innerText = "";
        const img4 = document.createElement("img");
        imgBox4.appendChild(img4);
        img4.setAttribute("src", imgUrl);
        img4.style.width = "60%";
        const nameProd4 = document.createElement("td");
        row5.appendChild(nameProd4);
        nameProd4.innerText = "nome4";
        const quant4 = document.createElement("td");
        row5.appendChild(quant4);
        quant4.innerText = "quantità4";
        const price4 = document.createElement("td");
        row5.appendChild(price4);
        price4.innerText = "prezzo4";

        const imgBox5 = document.createElement("td");
        row6.appendChild(imgBox5);
        imgBox5.innerText = "";
        const img5 = document.createElement("img");
        imgBox5.appendChild(img5);
        img5.setAttribute("src", imgUrl);
        img5.style.width = "60%";
        const nameProd5 = document.createElement("td");
        row6.appendChild(nameProd5);
        nameProd5.innerText = "nome5";
        const quant5 = document.createElement("td");
        row6.appendChild(quant5);
        quant5.innerText = "quantità5";
        const price5 = document.createElement("td");
        row6.appendChild(price5);
        price5.innerText = "prezzo5";
      };
      generateTable();
      /* ESERCIZIO 12
         Crea una funzione che aggiunga una riga alla tabella precedentemente creata e fornisca i dati necessari come parametri
      */

      const addRow = function (imgUrlParam, nameParam, quantParam, priceParam) {
        const table = document.querySelector("table");

        const newRow = document.createElement("tr");
        table.appendChild(newRow);

        const newBoxImg = document.createElement("td");
        newRow.appendChild(newBoxImg);
        newBoxImg.innerText = "";
        const newImg = document.createElement("img");
        newBoxImg.appendChild(newImg);
        newImg.setAttribute("src", imgUrlParam);
        newImg.style.width = "60%";
        const newName = document.createElement("td");
        newRow.appendChild(newName);
        newName.innerText = nameParam;
        const newQuant = document.createElement("td");
        newRow.appendChild(newQuant);
        newQuant.innerText = quantParam;
        const newPrice = document.createElement("td");
        newRow.appendChild(newPrice);
        newPrice.innerText = priceParam;
      };

      addRow(
        "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/1920px-Google_2015_logo.svg.png",
        "nome6",
        "quantità6",
        "prezzo6"
      );

      addRow(
        "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Google_2015_logo.svg/1920px-Google_2015_logo.svg.png",
        "nome7",
        "quantità7",
        "prezzo7"
      );

      /* ESERCIZIO 13
        Crea una funzione che nasconda le immagini della tabella quando eseguita
      */

      const hideAllImages = function () {
        const tableImgs = document.querySelectorAll("table img");
        tableImgs.forEach((element) => (element.style.display = "none"));
      };

      hideAllImages();

      /* EXTRA ESERCIZIO 14
        Crea una funzione che cambi il colore del h2 con id "changeMyColor" con un colore random ad ogni click ricevuto
      */
      const title2 = document.getElementById("changeMyColor");
      const changeColorWithRandom = function () {
        let setRgb = [0, 0, 0];
        for (let i = 0; i < setRgb.length; i++) {
          setRgb[i] = Math.floor(Math.random() * 256);
        }
        title2.style.color = `rgb(${setRgb[0]}, ${setRgb[1]}, ${setRgb[2]})`;
      };
      title2.addEventListener("click", changeColorWithRandom);
      /* EXTRA ESERCIZIO 15
        Crea una funzione che elimini le vocali da ogni elemento testuale della pagina (puoi aiutarti con i nuovi metodi degli array di ES6)
      */
      // h1, h2, h3, li, p, a, th, td
      const vowels = [
        "a",
        "à",
        "e",
        "è",
        "i",
        "o",
        "u",
        "A",
        "E",
        "I",
        "O",
        "U",
      ];
      const deleteVowels = function () {
        let selectText = document.querySelectorAll(
          "h1, h2, h3, li, p, a, th, td"
        );
        let arrText = [];
        for (let i = 0; i < selectText.length; i++) {
          arrText[i] = selectText[i].innerText;
          for (let c = 0; c < arrText.length; c++) {
            for (let r = 0; r < vowels.length; r++) {
              arrText[c] = arrText[c].replaceAll(vowels[r], " ");
            }
          }
          selectText[i].innerText = arrText[i];
        }
        //        let title3 = document.querySelector("h3");
        //        let string3 = title3.innerHTML;
        //        console.log(string3);
      };
      deleteVowels();
    </script>
  </body>
</html>
